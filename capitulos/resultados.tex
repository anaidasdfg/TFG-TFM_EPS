%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Plantilla TFG/TFM
% Escuela Politécnica Superior de la Universidad de Alicante
% Realizado por: Jose Manuel Requena Plens
% Contacto: info@jmrplens.com / Telegram:@jmrplens
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Resultados}
\label{resultados}
\par La primera evaluación general de resultados realizada es la comparación entre los dos métodos de procesamiento de datos de entrada mencionados: a nivel de parcela o de pixel. En las siguientes tablas se pueden ver la evaluación de los resultados, divididos en entradas a nivel de parcela \ref{tab:errorpc} y a nivel de pixel \ref{tab:errorpx}, según los índices estadísticos de \gls{mae}, \gls{rmse} y el coeficiente de determinación ($R^2$). Ambos conjuntos corresponden al mejor caso de cada método, esto es, habiendo seleccionado sus parámetros de entrada óptimos en cuanto a número de variables y set de parcelas de entrenamiento, y habiendo optimizado también los parámetros del regresor. Estas optimizaciones se detallan en los siguientes apartados para cada caso. 

\begin{table}[h]\label{tab:errorpc}
\centering
\begin{tabular}{lccc}
\multicolumn{4}{c}{Datos de entrada a nivel de parcela}                            \\ \hline \hline
\multicolumn{1}{l|}{}                            & BBCH  & Altura & BBCH\&Altura \\ \cline{2-4} 
\multicolumn{1}{l|}{$R^2$}                       & 0.77  & 0.66   & 0.70 \\
\multicolumn{1}{l|}{\gls{rmse}} 				 & 14.27 & 17.55  & 15.69 \\
\multicolumn{1}{l|}{\gls{mae}}  				 & 10.59 & 13.87  & 12.63       
\end{tabular}
\caption{Índices estadísticos de las predicciones con datos de entrada a nivel de parcela.}
\end{table}

\begin{table}[h]\label{tab:errorpx}
\centering
\begin{tabular}{lccc}
\multicolumn{4}{c}{Datos de entrada a nivel de pixel}                            \\ \hline \hline
\multicolumn{1}{l|}{}                            & BBCH  & Altura & BBCH\&Altura \\ \cline{2-4} 
\multicolumn{1}{l|}{$R^2$}                       & 0.45  & 0.52   & 0.45         \\
\multicolumn{1}{l|}{\gls{rmse}} 				 & 22.23 & 19.89  & 21.17        \\
\multicolumn{1}{l|}{\gls{mae}}  				 & 17.26 & 15.64  & 16.58       
\end{tabular}
\caption{Índices estadísticos de las predicciones con datos de entrada a nivel de pixel.}
\end{table}

\par Como se puede observar, para las 3 posibles salidas para las que se han diseñado los modelos, el método que emplea datos de entrada a nivel de parcela consigue notablemente mejores resultados. Se obtienen valores de coeficiente de determinación más cercanos a 1, valor ideal, apreciándose en el modelo de predicción de \gls{bbch} una mejora para el caso de parcelas de un 71.1\% con respecto al de pixel. Lo mismo ocurre en los índices de error, cuyo valor óptimo es 0: se obtienen valores inferiores para el método a nivel de parcela en todos los casos estudiados.
\\
\par Los mejores resultados obtenidos para el procesamiento a nivel de parcelas pueden recaer en que todos los datos recogidos de verdad de tierra se presentan por parcelas, por lo que no existen unos datos para contrastar cada pixel extraído de la información de satélite con el terreno. Dentro de cada parcela el cultivo no tiene porqué desarrollarse de manera homogénea, pero la información recibida de este consta del valor de \gls{bbch} (con el requisito de ser el correcto para al menos el 50\% del cultivo) y la altura generalizados por parcela, además de los máximos y mínimos de cada uno, por lo que las variaciones que se puede hallar en distintas zonas del cultivo no se tienen en cuenta. Por ello, el método de pixel implementado asigna un solo valor de salida para conjuntos de píxeles de la misma parcela, los cuales pueden estar representando unos niveles de \gls{bbch} o altura distintos, y esto conlleva un ajuste del modelo erróneo y, por tanto, peores índices estadísticos de evaluación. Aún así, este método no ha sido descartado, ya que el análisis a nivel de pixel es de gran interés para detectar esas variaciones de desarrollo de un cultivo dentro de una misma parcela. 
\section{Método por parcelas}
\subsection{Optimización}
\begin{figure}[h]
    \centering
    \includegraphics[height=9cm]{archivos/tfg/opt_tree_bbch_mean} 
    \caption{Optimización del número de árboles para \gls{rfr} en el modelo para \gls{bbch}}
    \label{fig:opt_parcl}
\end{figure}
\par La optimización de los datos y parámetros utilizados en este método para cada caso se presentan en la tabla (), donde se pueden ver: la parcela utilizada para el periodo de test del modelo; siendo el resto de parcelas utilizadas en el entrenamiento, y el número de árboles óptimo para \gls{rfr}. 
\subsection{Salidas del modelo}
\subsection{Evaluación}
\section{Método por píxeles} 
\subsection{Optimización}
\subsection{Salidas del modelo}
\subsection{Evaluación}